@using TheNextLevel.Application.DTOs
@inject NavigationManager Navigation

<div class="project-card" @onclick="@( () => Navigation.NavigateTo($"/project/{Project?.Id}"))" style="--bg-image: url('@GetBackgroundImage()')">
    <div class="project-content">
        <div class="project-stats">
            <div class="stat">
                <div class="stat-value">@Project?.Tasks.Count()</div>
                <div class="stat-label">Tasks</div>
            </div>
            <div class="stat">
                <div class="stat-value">@Project?.Tasks.Where(t => t.IsCompleted).Count()</div>
                <div class="stat-label">Completed</div>
            </div>
        </div>
        <h3 class="project-name">@Project?.Name</h3>
    </div>
</div>

@code {
    [Parameter]
    public ProjectDto? Project { get; set; }

    private string GetBackgroundImage()
    {
        // For now, use the default image
        // In the future, when Project has a BackgroundImageUrl property, use:
        // return !string.IsNullOrEmpty(Project?.BackgroundImageUrl)
        //     ? Project.BackgroundImageUrl
        //     : "https://images.unsplash.com/photo-1441974231531-c6227db76b6e?w=800&q=80";

        return "https://images.unsplash.com/photo-1441974231531-c6227db76b6e?w=800&q=80";
    }
}