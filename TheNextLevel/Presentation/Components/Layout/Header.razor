@implements IDisposable
@inject NavigationManager Navigation

<header class="header">
    <div class="header-content">
        <div class="header-brand">
            <h1 class="app-title" @onclick="@(() => Navigation.NavigateTo("/"))">The Next Level</h1>
        </div>
        
        <button class="menu-toggle" @onclick="ToggleMobileMenu">
            <span class="menu-icon"></span>
        </button>
    </div>
</header>

@code {
    private bool _showMobileMenu = false;

    protected override void OnInitialized()
    {
        Navigation.LocationChanged += OnLocationChanged;
    }

    private void OnLocationChanged(object? sender, Microsoft.AspNetCore.Components.Routing.LocationChangedEventArgs e)
    {
        StateHasChanged();
    }

    private string GetActiveClass(string path)
    {
        var currentPath = new Uri(Navigation.Uri).AbsolutePath;
        return currentPath == path ? "active" : "";
    }

    private void ToggleMobileMenu()
    {
        _showMobileMenu = !_showMobileMenu;
    }

    private void CloseMobileMenu()
    {
        _showMobileMenu = false;
    }

    public void Dispose()
    {
        Navigation.LocationChanged -= OnLocationChanged;
    }

}
